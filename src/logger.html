<script>
const POSITION_TOP_LEFT = 'top-left'
const POSITION_TOP_RIGHT = 'top-right'
const POSITION_BOTTOM_LEFT = 'bottom-left'
const POSITION_BOTTOM_RIGHT = 'bottom-right'

export default {
  setup (Logger) {
    Logger.POSITION_TOP_LEFT = POSITION_TOP_LEFT
    Logger.POSITION_TOP_RIGHT = POSITION_TOP_RIGHT
    Logger.POSITION_BOTTOM_LEFT = POSITION_BOTTOM_LEFT
    Logger.POSITION_BOTTOM_RIGHT = POSITION_BOTTOM_RIGHT
  },

  data () {
    return {
      logs: [],
      position: POSITION_BOTTOM_LEFT
    }
  },

  oncreate () {
    this.clear()
  },

  methods: {
    clear () {
      this.logs = []
      this.cache = {}
    },

    log (name, value) {
      var log
      if (log = this.cache[name]) {
        log.value = value
      } else {
        log = { name, value }
        this.cache[name] = log
        this.logs.push(log)
      }
      this.set({ logs: this.logs })
    }
  }
}
</script>

<div class="container {position}">
  <table>
    <tbody>
      {#each logs as log}
        <tr>
          <td>{log.name}:</td><td class="value">{log.value}</td>
        </tr>
      {/each}
    </tbody>
  </table>
</div>

<style>
  .container {
    position: absolute;
    opacity: 0.9;
    background-color: #020;
    color: lime;
    font-family: monospace;
    font-size: 12px;
    backface-visibility: hidden;
  }
  .top-left {
    top: 0;
    left: 0;
  }
  .top-right {
    top: 0;
    right: 0;
  }
  .bottom-left {
    bottom: 0;
    left: 0;
  }
  .bottom-right {
    bottom: 0;
    right: 0;
  }
  .value {
    will-change: content;
  }
</style>